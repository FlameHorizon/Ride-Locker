@page "/"

@rendermode InteractiveServer

@using Website.Models
@using Website.Components.Pieces

<PageTitle>Home</PageTitle>

<div class="content-inner position-relative m-auto">
    <table class="table table-borderless table-striped">
        <tbody>
            @foreach (Ride ride in _pagedRides) {
            <tr>
                <RideTableRow Ride=@ride />
            </tr>
            }
        </tbody>
    </table>

    <nav aria-label="Ride pagination">
        <ul class="pagination">
            @* Previous Button *@
            <li class="page-item @(_currentPage == 1 ? "disabled" : "")">
                <button class="page-link" @onclick="() => ChangePage(_currentPage - 1)" 
                        disabled="@(_currentPage == 1)">Previous</button>
            </li>

            @* Dynamic Page Numbers *@
            @for (int i = 1; i <= _totalPages; i++)
            {
                var pageNumber = i; @* Local variable for the closure *@
                <li class="page-item @(pageNumber == _currentPage ? "active" : "")">
                    <button class="page-link" @onclick="() => ChangePage(pageNumber)">
                        @pageNumber
                    </button>
                </li>
            }

            @* Next Button *@
            <li class="page-item @(_currentPage == _totalPages ? "disabled" : "")">
                <button class="page-link" @onclick="() => ChangePage(_currentPage + 1)" 
                        disabled="@(_currentPage == _totalPages)">Next</button>
            </li>
        </ul>
    </nav>
</div>
